<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><title>Class ZCL_ALOG_DBTAB_LOGGER</title><link rel="stylesheet" href="../../../htmldesign/stylesheet.css" type="text/css"></head><body><div id="header"><div id="navigationMenu"><a href="#types">Types</a> | <a href="#attributes">Attributes</a> | <a href="#methods">Methods</a></div></div><div id="content"><h2>Class <span class="identifier objectName">ZCL_ALOG_DBTAB_LOGGER</span></h2><p>public inheriting from ZCL_ALOG_MSG_LOGGER_BASE abstract create public</p><h4>Documentation</h4><span class="abapDocComment"> Database table logger
 <p>
 This logger class is designed as an abstract base class to inherit from to define concrete
 logger classes, that can log to custom database tables with a compatible structure definition.
 </p>
 Features:
 <ul>
   <li>Mapping of log entry text / type / username / timestamp</li>
   <li>Custom key configuration (e. g. using UUIDs or number range objects)</li>
   <li>Support for secondary database connections</li>
 </ul></span><h4 id="types">Types</h4><table><thead><tr><th>Visibility and Level</th><th>Name</th><th>Documentation</th></tr></thead><tr ><td>public</td><td><span class="identifier fieldName">gty_key_component_tab</span> TYPE STANDARD TABLE OF fieldname</td><td>&#160;</td></tr><tr ><td>public</td><td><span class="identifier fieldName">gty_mapping</span> (structured type)</td><td>&#160;</td></tr></table><h4 id="attributes">Attributes</h4><table><thead><tr><th>Visibility and Level</th><th>Name</th><th>Documentation</th></tr></thead><tr ><td>private instance</td><td><span class="identifier fieldName">mo_descr</span> type ref to CL_ABAP_STRUCTDESCR  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">mo_key_descr</span> type ref to CL_ABAP_STRUCTDESCR  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">ms_mapping</span> type GTY_MAPPING  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">mt_key_components</span> type GTY_KEY_COMPONENT_TAB  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">mv_always_implicit_commit</span> type ABAP_BOOL  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">mv_connection_key</span> type STRING  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">mv_tabname</span> type TABNAME  </td><td>&#160;</td></tr><tr ><td>private instance</td><td><span class="identifier fieldName">mv_use_secondary_connection</span> type ABAP_BOOL  </td><td>&#160;</td></tr></table><h4 id="methods">Methods</h4><table><thead><tr><th>Visibility and Level</th><th>Name</th><th>Documentation</th></tr></thead><tr ><td>public instance</td><td><table class="methodSignature"><tr><td colspan="3"><span class="identifier methodName">constructor</span> </td></tr><tr><td>importing</td><td><span class="identifier parameterName">iv_tabname</span></td><td>type TABNAME</td></tr><tr><td></td><td><span class="identifier parameterName">is_mapping</span></td><td>type GTY_MAPPING</td></tr><tr><td></td><td><span class="identifier parameterName">it_key_components</span></td><td>type GTY_KEY_COMPONENT_TAB</td></tr><tr><td></td><td><span class="identifier parameterName">iv_secondary_conn_key</span></td><td>type STRING optional</td></tr><tr><td></td><td><span class="identifier parameterName">iv_use_secondary_connection</span></td><td>type ABAP_BOOL default ABAP_FALSE</td></tr><tr><td></td><td><span class="identifier parameterName">iv_always_implicit_commit</span></td><td>type ABAP_BOOL default ABAP_FALSE</td></tr><tr><td>raising</td><td colspan="2"><span class="identifier exceptionName">zcx_alog_illegal_argument</span></td></tr></table></td><td><span class="abapDocComment"> </span><h5>Parameters</h5><table class="methodParametersDocumentation"><tr ><td><span class="identifier parameterName">iv_tabname</span></td><td><span class="abapDocComment"> Name of the database table
 </span></td></tr><tr ><td><span class="identifier parameterName">is_mapping</span></td><td><span class="abapDocComment"> Mapping configuration
 </span></td></tr><tr ><td><span class="identifier parameterName">it_key_components</span></td><td><span class="abapDocComment"> Key columns
 </span></td></tr><tr ><td><span class="identifier parameterName">iv_secondary_conn_key</span></td><td><span class="abapDocComment"> Key for secondary database connection
 </span></td></tr><tr ><td><span class="identifier parameterName">iv_use_secondary_connection</span></td><td><span class="abapDocComment"> Use secondary database connection
 </span></td></tr><tr ><td><span class="identifier parameterName">iv_always_implicit_commit</span></td><td><span class="abapDocComment"> Always commit after adding a log entry
 </span></td></tr></table><h5>Class-based Exceptions</h5><table class="exceptions"><tr ><td><span class="identifier exceptionName">zcx_alog_illegal_argument</span></td><td><span class="abapDocComment"> Illegal argument</span></td></tr></table></td></tr><tr ><td>protected instance</td><td><span class="identifier methodName">entry_internal</span> redefinition</td><td>&#160;</td></tr><tr ><td>protected instance</td><td><table class="methodSignature"><tr><td colspan="3"><span class="identifier methodName">get_next_key</span> abstract</td></tr><tr><td>returning</td><td>value(<span class="identifier parameterName">rv_key</span>)</td><td>type STRING</td></tr></table></td><td>&#160;</td></tr><tr ><td>protected instance</td><td><table class="methodSignature"><tr><td colspan="3"><span class="identifier methodName">insert_entry_in_db</span> </td></tr><tr><td>importing</td><td><span class="identifier parameterName">ig_row</span></td><td>type ANY</td></tr><tr><td>raising</td><td colspan="2"><span class="identifier exceptionName">zcx_alog_logging_failed</span></td></tr></table></td><td><span class="abapDocComment"> Persist the new log entry
 <p>
 The default implementation of this method uses a dynamic OpenSQL db insert based on the
 current configuration regarding target table and secondary connection settings. If other
 logic should be used by the logger you may override this method and instead for example
 call an update function module to make use of update tasks.
 </p>
 </span><h5>Parameters</h5><table class="methodParametersDocumentation"><tr ><td><span class="identifier parameterName">ig_row</span></td><td><span class="abapDocComment"> New log entry (type is the structure type of the db table)
 </span></td></tr></table><h5>Class-based Exceptions</h5><table class="exceptions"><tr ><td><span class="identifier exceptionName">zcx_alog_logging_failed</span></td><td><span class="abapDocComment"> Logging failed</span></td></tr></table></td></tr><tr ><td>private static</td><td><table class="methodSignature"><tr><td colspan="3"><span class="identifier methodName">validate_key</span> </td></tr><tr><td>importing</td><td><span class="identifier parameterName">it_key</span></td><td>type GTY_KEY_COMPONENT_TAB</td></tr><tr><td></td><td><span class="identifier parameterName">io_descr</span></td><td>type ref to CL_ABAP_STRUCTDESCR</td></tr><tr><td>raising</td><td colspan="2"><span class="identifier exceptionName">zcx_alog_illegal_argument</span></td></tr></table></td><td>&#160;</td></tr><tr ><td>private static</td><td><table class="methodSignature"><tr><td colspan="3"><span class="identifier methodName">validate_mapping</span> </td></tr><tr><td>importing</td><td><span class="identifier parameterName">is_mapping</span></td><td>type GTY_MAPPING</td></tr><tr><td></td><td><span class="identifier parameterName">io_descr</span></td><td>type ref to CL_ABAP_STRUCTDESCR</td></tr><tr><td>raising</td><td colspan="2"><span class="identifier exceptionName">zcx_alog_illegal_argument</span></td></tr></table></td><td>&#160;</td></tr><tr ><td>private static</td><td><table class="methodSignature"><tr><td colspan="3"><span class="identifier methodName">write_to_component</span> </td></tr><tr><td>importing</td><td><span class="identifier parameterName">iv_component_name</span></td><td>type ABAP_COMPNAME</td></tr><tr><td></td><td><span class="identifier parameterName">iv_text</span></td><td>type CSEQUENCE</td></tr><tr><td>changing</td><td><span class="identifier parameterName">cg_structure</span></td><td>type DATA</td></tr></table></td><td>&#160;</td></tr></table></div></body></html>